<h2 class="my-4 text-center">Items in the cart:</h2>

@if (cart.length > 0) {
<div class="container my-5">
  <div class="row">
    @for (item of cart; track item.id) {
    <div class="col-12 col-lg-6 mb-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="row fw-bold border-bottom pb-2 mb-3">
            <img
              src="/images/{{item.imageName}}"
              class="img-fluid rounded"
              style="width: 7.5rem; height: 10rem; object-fit: cover"
              alt="{{item.name}}"
            />
            <div class="col-md-4 fs-4">{{item.name}}</div>
            <div class="col-md-2 text-center fs-5">Price: {{item.price}}</div>
            <div class="col-md-2 text-center fs-6">
              <div
                class="d-flex align-items-center justify-content-center ms-5 mt-4"
              >
                <button
                  class="btn btn-outline-secondary btn-sm px-2"
                  (click)="decrQtty(item)"
                >
                  <i class="bi bi-dash"></i>
                </button>
                <span class="mx-2">{{item.qtty}}</span>
                <button
                  class="btn btn-outline-secondary btn-sm px-2"
                  (click)="incrQtty(item)"
                >
                  <i class="bi bi-plus"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6"></div>
            <div class="col-md-6 text-end">
              <h5>
                Total:
                <span class="text-primary"
                  >{{(item.price * item.qtty).toFixed(2)}}</span
                >
              </h5>
            </div>
          </div>
        </div>
      </div>
    </div>
    }
  </div>
  <div class="d-flex flex-column align-items-center my-5">
    <p class="fs-4 mb-1">Subtotal: {{totalStr}} €</p>
    <p class="fs-5 mb-1 text-secondary">
      Service tax (10%): +{{taxAmountStr}} €
    </p>
    <p class="fs-5 mb-1 text-primary">
      Subtotal after tax: {{totalWithTaxStr}} €
    </p>
    @if (qualifiesForDiscount) {
    <p class="fs-5 mb-1 text-success">Discount (15%): -{{discountStr}} €</p>
    }
    <p class="fs-1">Grand Total: {{finalTotalStr}} €</p>
    <button type="button" class="btn btn-outline-success btn-lg w-50">
      Checkout
    </button>
    <small class="text-muted mt-2"
      >* 10% service tax is included in the grand total.</small
    >
    @if (qualifiesForDiscount) {
    <div class="alert alert-success mt-3">
      Orders above 10,000 € qualify for a 15% discount!
    </div>
    }
  </div>
</div>
} @else {
<p
  class="fs-1 text-center fw-bold bg-danger text-white p-5 rounded-4 shadow w-50 mx-auto"
>
  Shopping cart is Empty!
</p>
}
